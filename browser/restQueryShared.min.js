(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.restQueryShared=e()}})(function(){var e,t,r;return function(){function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(e){var r=t[o][1][e];return i(r||e)},l,l.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}return e}()({1:[function(e,t,r){"use strict";t.exports={path:e("./path.js")}},{"./path.js":3}],2:[function(e,t,r){"use strict";const n={lowerCaseArray:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],upperCaseArray:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],digitArray:["0","1","2","3","4","5","6","7","8","9"],lowerCaseAndDigitArray:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],collectionRegExp:/^[A-Z][a-zA-Z0-9]*$/,methodRegExp:/^[A-Z][A-Z0-9-]*$/,propertyRegExp:/^(\.[a-zA-Z0-9_-]+)+$/,linkPropertyRegExp:/^~[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)*$/,multiLinkPropertyRegExp:/^~~[a-zA-Z0-9_-]+$/,idRegExp:/^[0-9a-f]{24}$/,rangeRegExp:/^([0-9]+)(?:-([0-9]+))?$/,slugIdRegExp:/^[a-z0-9-]{1,72}$/,unicodeSlugIdRegExp:/^[\p{Ll}\p{Lm}\p{Lo}\p{N}\p{M}-]{1,72}$/u,asciiMapCommon:{"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"ss","œ":"oe","Œ":"OE","“":'"',"”":'"',"‘":"'","’":"'","…":"..."},asciiMapWorldAlpha:{"α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Ū":"u","ء":"e","آ":"a","أ":"a","ؤ":"w","إ":"i","ئ":"y","ا":"a","ب":"b","ة":"t","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"dh","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"d","ط":"t","ظ":"z","ع":"e","غ":"gh","ـ":"_","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","َ‎":"a","ُ":"u","ِ‎":"i","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","چ":"ch","ک":"k","گ":"g","پ":"p","ژ":"zh","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","ټ":"p","ځ":"z","څ":"c","ډ":"d","ﺫ":"d","ﺭ":"r","ړ":"r","ﺯ":"z","ږ":"g","ښ":"x","ګ":"g","ڼ":"n","ۀ":"e","ې":"e","ۍ":"ai","ٹ":"t","ڈ":"d","ڑ":"r","ں":"n","ہ":"h","ھ":"h","ے":"e"},asciiMapSymbolsEn:{"€":" euro","₢":" cruzeiro","₣":" french franc","£":" pound","₤":" lira","₥":" mill","₦":" naira","₧":" peseta","₨":" rupee","₩":" won","₪":" new shequel","₫":" dong","₭":" kip","₮":" tugrik","₯":" drachma","₰":" penny","₱":" peso","₲":" guarani","₳":" austral","₴":" hryvnia","₵":" cedi","¢":" cent","¥":" yen","元":" yuan","円":" yen","﷼":" rial","₠":" ecu","¤":" currency","฿":" baht","\\$":" dollar","©":" (c)","∑":" sum","®":" (r)","†":" +","∂":" d","ƒ":" f","™":" tm","℠":" sm","˚":" o","º":" o","ª":" a","•":" *","∆":" delta","∞":" infinity","♥":" love","&":" and","\\|":" or","<":" less",">":" greater"},asciiMapSymbolsFr:{"€":" euro","₢":" cruzeiro","₣":" franc","£":" livre","₤":" lire","₥":" mill","₦":" naira","₧":" peseta","₨":" rupee","₩":" won","₪":" new shequel","₫":" dong","₭":" kip","₮":" tugrik","₯":" drachma","₰":" penny","₱":" peso","₲":" guarani","₳":" austral","₴":" hryvnia","₵":" cedi","¢":" cent","¥":" yen","元":" yuan","円":" yen","﷼":" rial","₠":" ecu","¤":" monnaie","฿":" baht","\\$":" dollar","©":" (c)","∑":" sum","®":" (r)","†":" +","∂":" d","ƒ":" f","™":" tm","℠":" sm","˚":" o","º":" o","ª":" a","•":" *","∆":" delta","∞":" infini","♥":" aime","&":" et","\\|":" ou","<":" moins",">":" plus"}};t.exports=n},{}],3:[function(e,t,r){"use strict";const n=e("./charmap.js");const i=e("string-kit/lib/camel.js");const a=e("string-kit/lib/unicode.js");const o=e("tree-kit/lib/path.js");const s={};t.exports=s;function u(e){return e.value}function c(){return this.value}function l(){return this.match.toString()}function f(...e){if(!e.length){return"/"+this.map(u).join("/")}return"/"+Array.prototype.slice.call(this,...e).map(u).join("/")}function d(...e){return y(Array.prototype.slice.call(this,...e))}function h(){return this[this.length-1]}function p(){var e;e=this.path.toString()+(this.query||"");if(this.hash){e+="#"+this.hash.action;if(this.hash.path){e+=":"+this.hash.path.toString()}}return e}function y(e){e=e||[];Object.defineProperties(e,{toString:{value:f},slice:{value:d},last:{get:h}});return e}function g(e){e=e||{};Object.defineProperties(e,{toString:{value:p}});return e}function m(e){e=e||{};Object.defineProperties(e,{primaryPath:{get:function(){if(this.subPath){return this.subPath.before}return this.full}},hashPrimaryPath:{get:function(){if(!this.hash||!this.hash.path){return null}else if(this.hash.path.subPath){return this.hash.path.subPath.before}return this.hash.path.full}}});return e}s.parse=function(e,t){var r,n,i,a,o,u,c;if(Array.isArray(e)){return e}else if(typeof e!=="string"){throw new Error("[restQuery] .parse() 'path' should be a string")}o=y();e=e.replace(/\/+/,"/");a=e.split("/");try{for(r=0,i=0,n=a.length;r<n;r++){if(a[r]===""){continue}u=s.parseNode(a[r],t);if(i&&(u.type==="property"||u.type==="linkProperty")&&o[i-1].type==="property"){o[i-1].identifier+="."+u.identifier;o[i-1].type=u.type}else{o[i]=u;i++}}}catch(e){c=new Error("Bad URL: '"+a[r]+"' does not match any node type");c.type="badRequest";throw c}return o};s.parseNode=function(e,t){var r,o;if(e.length<1){throw new Error("[restQuery] parseNode() : argument #0 length should be >= 1")}if(e.length>144||e.length>72&&a.length(e)>72){throw new Error("[restQuery] parseNode() : argument #0 length should be <= 72")}var s={value:e,isDocument:false,isCollection:false};Object.defineProperties(s,{toString:{value:c}});if(t){if(e[0]==="{"&&e[e.length-1]==="}"){o=e.slice(1,-1).split(":");if(o[1]){s.matchName=o[1]}e=o[0];if(e[0]==="$"){s.type="context";s.contextPath=e=e.slice(1);return s}switch(e){case"*":s.type="wildcard";s.wildcard="any";break;case"...":s.type="wildcard";s.wildcard="anySubPath";break;case"id":s.type="wildcard";s.wildcard="anyId";s.isDocument=true;break;case"slugId":s.type="wildcard";s.wildcard="anySlugId";s.isDocument=true;break;case"document":s.type="wildcard";s.wildcard="anyDocument";s.isDocument=true;break;case"collection":s.type="wildcard";s.wildcard="anyCollection";s.isCollection=true;break;default:throw new Error("[restQuery] parseNode() -- bad node special type: "+e)}return s}o=e.split(":");if(o[1]){s.matchName=o[1]}e=o[0]}if(n.upperCaseArray.includes(e[0])){if(e.length===1){s.type="collection";s.identifier=e[0].toLowerCase()+e.slice(1);s.isCollection=true;return s}if(n.lowerCaseArray.includes(e[1])){if(e.match(n.collectionRegExp)){s.type="collection";s.identifier=e[0].toLowerCase()+e.slice(1);s.isCollection=true;return s}throw new Error("[restQuery] parseNode() : argument #0 start with an uppercase and then a lowercase letter but mismatch a collection type")}if(e.match(n.methodRegExp)){s.type="method";s.identifier=i.toCamelCase(e);return s}if(e.match(n.collectionRegExp)){s.type="collection";s.identifier=e[0].toLowerCase()+e.slice(1);s.isCollection=true;return s}throw new Error("[restQuery] parseNode() : argument #0 start with an uppercase but mismatch collection or method type")}if(e.length===24&&e.match(n.idRegExp)){s.type="id";s.identifier=e;s.isDocument=true;return s}if(e[0]==="."){if(!e.match(n.propertyRegExp)){throw new Error("[restQuery] parseNode() : argument #0 does not validate")}s.type="property";s.identifier=e.slice(1);s.isDocument=true;return s}if(e[0]==="~"){if(e[1]==="~"){if(!e.match(n.multiLinkPropertyRegExp)){throw new Error("[restQuery] parseNode() : argument #0 does not validate")}s.type="multiLinkProperty";s.identifier=e.slice(2);s.isCollection=true;return s}if(!e.match(n.linkPropertyRegExp)){throw new Error("[restQuery] parseNode() : argument #0 does not validate")}s.type="linkProperty";s.identifier=e.slice(1);s.isDocument=true;return s}if(n.digitArray.includes(e[0])&&(r=e.match(n.rangeRegExp))){if(r[2]){s.type="range";s.min=parseInt(r[1],10);s.max=parseInt(r[2],10);s.isCollection=true;return s}s.type="offset";s.identifier=parseInt(e,10);s.isDocument=true;return s}if(n.lowerCaseAndDigitArray.includes(e[0])&&e.match(n.slugIdRegExp)){s.type="slugId";s.unicode=false;s.identifier=e;s.isDocument=true;return s}if(e.match(n.unicodeSlugIdRegExp)){s.type="slugId";s.unicode=true;s.identifier=e;s.isDocument=true;return s}throw new Error("[restQuery] parseNode() : argument #0 does not validate")};function w(e){var t,r={};for(t in e){r[t]=e[t]}Object.defineProperties(r,{toString:{value:c}});return r}function b(e,t,r){if(!t[r]){t[r]=1}else if(t[r]===1){e[r+"1"]=e[r];delete e[r];t[r]=2;r+="2"}else{r+=++t[r]}return r}function A(e,t,r,n){n=b(e,r,n);e[n]=t;return t}function P(e,t,r,n,i,a){a=b(e,i,a);var o=Object.create(Object.prototype,{toString:{value:l}});o.match=t.slice(r,n+1);o.before=t.slice(0,r);o.after=t.slice(n+1);o.upto=t.slice(0,n+1);o.onward=t.slice(r);e[a]=o;return o}s.applyContext=function(e,t){var r,n,i,a=[];if(!Array.isArray(e)){e=s.parse(e,true)}for(r=0,n=e.length;r<n;r++){if(e[r].contextPath){i=o.get(t,e[r].contextPath);if(Array.isArray(i)){a=a.concat(i);continue}if(typeof i!=="string"){if(i&&typeof i==="object"&&i.toString){i=i.toString()}else{return false}}i=s.parse(i);if(!i){return false}a=a.concat(i)}else{a.push(e[r])}}return y(a)};s.match=function(e,t,r){try{if(!Array.isArray(e)){e=s.parse(e,true)}if(!Array.isArray(t)){t=s.parse(t)}}catch(e){return false}var n,i,a,o=null,u=0,c,l=null,f=m(),d=y(),h={};f.full=t;if(e.length===0){return t.length===0?f:false}if(r){e=s.applyContext(e,r,true);if(!e){return undefined}}for(n=0,i=e.length;n<i;n++){if(e[n].contextPath){throw new Error("[restQuery] .match() this pattern needs a context.")}if(e[n].wildcard==="anySubPath"){u++}}for(n=0,i=t.length;n<i;n++){d[n]=w(t[n])}if(u){if(u>1){console.log("Warning: multiple 'anySubPath' wildcards in the same pattern are not supported ATM");return false}c=t.length-e.length+1;if(c<0){return false}}else if(t.length!==e.length){return false}for(n=0,a=0,i=e.length;n<i;n++,a++){l=null;switch(e[n].wildcard){case"any":o=null;P(f,d,a,a,h,e[n].matchName||"wild");break;case"anySubPath":o=null;P(f,d,a,a+c-1,h,e[n].matchName||"subPath");a+=c-1;break;case"anyId":if(t[a].type!=="id"){return false}l=P(f,d,a,a,h,e[n].matchName||"wildId");break;case"anySlugId":if(t[a].type!=="slugId"){return false}l=P(f,d,a,a,h,e[n].matchName||"wildSlugId");break;case"anyDocument":if(t[a].type!=="id"&&t[a].type!=="slugId"){return false}l=P(f,d,a,a,h,e[n].matchName||"wildDocument");break;case"anyCollection":if(t[a].type!=="collection"){return false}o=e[n].matchName||"wildCollection";l=P(f,d,a,a,h,o);break;default:if(e[n].type!==t[a].type||e[n].identifier!==t[a].identifier){return false}if(e[n].isCollection){o=e[n].matchName||e[n].identifier;P(f,d,a,a,h,o)}}if(e[n].isDocument&&o&&t[a]){if(l){A(f,l,h,o+"Document")}else{P(f,d,a,a,h,o+"Document")}}if(!e[n].isCollection){o=null}}return f};s.fullPathParse=function(e,t){if(e&&typeof e==="object"){return e}var r,n=g();r=e.match(/^(\/[^#?]*)(?:\?([^#]+))?(?:#([^]+)?)?$/);if(!r){throw new Error("[restQuery] .fullPathParse() 'fullPath' should be a valid path")}n.path=s.parse(r[1],t);if(r[2]!==undefined){n.query=r[2]}if(r[3]!==undefined){n.hash=s.hashParse(r[3],t)}return n};s.hashParse=function(e,t){var r=e.indexOf(":");if(r===-1){return{action:e}}return{action:e.slice(0,r),path:s.parse(e.slice(r+1),t)}};s.fullPathMatch=function(e,t,r){var n,i;try{if(!e||typeof e!=="object"){e=s.fullPathParse(e,true)}if(!t||t!=="object"){t=s.fullPathParse(t)}}catch(e){return false}if(e.hash){if(e.hash.action!=="*"&&(!t.hash||e.hash.action!==t.hash.action)){return false}if(!e.hash.path!==!t.hash.path){return false}if(t.hash){i={action:t.hash.action}}if(e.hash.path){if(!t.hash){return false}i.path=s.match(e.hash.path,t.hash.path,r);if(!i){return i}}}n=s.match(e.path,t.path,r);if(!n){return n}if(i){n.hash=i}return n}},{"./charmap.js":2,"string-kit/lib/camel.js":4,"string-kit/lib/unicode.js":5,"tree-kit/lib/path.js":6}],4:[function(e,t,r){"use strict";var n={};t.exports=n;n.toCamelCase=function(e,t=false){if(!e||typeof e!=="string"){return""}return e.replace(/^[\s_-]*([^\s_-]+)|[\s_-]+([^\s_-]?)([^\s_-]*)/g,(e,r,n,i)=>{if(t){if(r){return r}if(!n){return""}return n.toUpperCase()+i}if(r){return r.toLowerCase()}if(!n){return""}return n.toUpperCase()+i.toLowerCase()})};n.camelCaseToSeparated=function(e,t=" "){if(!e||typeof e!=="string"){return""}return e.replace(/^([A-Z])|([A-Z])/g,(e,r,n)=>{if(r){return r.toLowerCase()}return t+n.toLowerCase()})};n.camelCaseToDash=n.camelCaseToDashed=(e=>n.camelCaseToSeparated(e,"-"))},{}],5:[function(e,t,r){"use strict";const n={};t.exports=n;n.encode=(e=>String.fromCodePoint(...e));n.decode=(e=>{var t,r,n=0,i=[],a=e.length;while(n<a){t=e.charCodeAt(n++);if(t>=55296&&t<=56319&&n<a){r=e.charCodeAt(n++);if((r&64512)===56320){i.push(((t&1023)<<10)+(r&1023)+65536)}else{i.push(t);n--}}else{i.push(t)}}return i});n.firstCodePoint=(e=>{var t,r=e.charCodeAt(0);if(r>=55296&&r<=56319&&e.length>=2){t=e.charCodeAt(1);if((t&64512)===56320){return((r&1023)<<10)+(t&1023)+65536}}return r});n.firstChar=(e=>{var t,r=e.charCodeAt(0);if(r>=55296&&r<=56319&&e.length>=2){t=e.charCodeAt(1);if((t&64512)===56320){return e.slice(0,2)}}return e[0]});n.toArray=(e=>{var t,r,n=0,i=[],a=e.length;while(n<a){t=e.charCodeAt(n++);if(t>=55296&&t<=56319&&n<a){r=e.charCodeAt(n++);if((r&64512)===56320){i.push(e.slice(n-2,n))}else{i.push(e[n-2]);n--}}else{i.push(e[n-1])}}return i});n.toCells=((e,t,r=4,i=0,...a)=>{var o,s,u=0,c=[],l,f=t.length;while(u<f){o=t.charCodeAt(u++);if(o===10){i=0}else if(o===9){l=r-i%r-1;c.push(new e("\t",...a));i+=1+l;while(l--){c.push(new e(null,...a))}}else if(o>=55296&&o<=56319&&u<f){s=t.charCodeAt(u++);if((s&64512)===56320){o=((o&1023)<<10)+(s&1023)+65536;c.push(new e(t.slice(u-2,u),...a));i++;if(n.codePointWidth(o)===2){i++;c.push(new e(null,...a))}}else{u--}}else{c.push(new e(t[u-1],...a));i++;if(n.codePointWidth(o)===2){c.push(new e(null,...a));i++}}}return c});n.fromCells=(e=>{return e.map(e=>e.filler?"":e.char).join("")});n.length=(e=>{var t,r,n=0,i=0,a=e.length;while(n<a){t=e.charCodeAt(n++);if(t>=55296&&t<=56319&&n<a){r=e.charCodeAt(n++);if((r&64512)!==56320){n--}}i++}return i});n.width=(e=>{var t=0;n.decode(e).forEach(e=>t+=n.codePointWidth(e));return t});n.arrayWidth=((e,t)=>{var r,i=0;if(t===undefined){t=e.length}for(r=0;r<t;r++){i+=n.isFullWidth(e[r])?2:1}return i});n.widthLimit=n.truncateWidth=((e,t)=>{var r,i,a=0,o=0,s=0,u=e.length;while(a<u){r=e.charCodeAt(a++);if(r>=55296&&r<=56319&&a<u){i=e.charCodeAt(a++);if((i&64512)===56320){r=((r&1023)<<10)+(i&1023)+65536}else{a--}}s+=n.codePointWidth(r);if(s>t){return e.slice(0,o)}o=a}return e});n.surrogatePair=(e=>{var t=e.charCodeAt(0);if(t<55296||t>=57344){return 0}else if(t<56320){return 1}return-1});n.isFullWidth=(e=>{if(e.length<=1){return n.isFullWidthCodePoint(e.codePointAt(0))}return n.isFullWidthCodePoint(n.firstCodePoint(e))});n.charWidth=(e=>{if(e.length<=1){return n.codePointWidth(e.codePointAt(0))}return n.codePointWidth(n.firstCodePoint(e))});n.codePointWidth=(e=>{if(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141)){return 2}return 1});n.isFullWidthCodePoint=(e=>n.codePointWidth(e)===2);n.toFullWidth=(e=>{return String.fromCodePoint(...n.decode(e).map(e=>e>=33&&e<=126?65280+e-32:e))})},{}],6:[function(e,t,r){"use strict";var n={};t.exports=n;n.op=function e(t,r,n,i){var a,o,s,u,c,l=false,f=false,d,h=true;if(!r||typeof r!=="object"&&typeof r!=="function"){return}if(typeof n==="string"){if(n){o=n.match(/([.#[\]]|[^.#[\]]+)/g)}else{o=[""]}if(o[0]==="."){o.unshift("")}if(o[o.length-1]==="."){o.push("")}}else if(Array.isArray(n)){o=n;f=true}else{throw new TypeError("[tree.path] ."+t+"(): the path argument should be a string or an array")}switch(t){case"get":case"delete":d=false;break;case"set":case"define":case"inc":case"dec":case"append":case"prepend":case"concat":case"insert":case"autoPush":d=true;break;default:throw new TypeError("[tree.path] .op(): wrong type of operation '"+t+"'")}u=r;s=o.length-1;for(a=0;a<=s;a++){if(f){if(c===undefined){c=o[a];continue}if(!u[c]||typeof u[c]!=="object"&&typeof u[c]!=="function"){if(!d){return undefined}u[c]={}}u=u[c];c=o[a];continue}else if(o[a]==="."){l=false;if(c===undefined){if(!h){h=true;continue}c=""}if(!u[c]||typeof u[c]!=="object"&&typeof u[c]!=="function"){if(!d){return undefined}u[c]={}}u=u[c];h=true;continue}else if(o[a]==="#"||o[a]==="["){l=true;h=false;if(c===undefined){if(!Array.isArray(u)){return undefined}continue}if(!u[c]||!Array.isArray(u[c])){if(!d){return undefined}u[c]=[]}u=u[c];continue}else if(o[a]==="]"){h=false;continue}h=false;if(!l){c=o[a];continue}switch(o[a]){case"length":c=o[a];break;case"first":c=0;break;case"last":c=u.length-1;if(c<0){c=0}break;case"next":if(!d){return undefined}c=u.length;break;case"insert":if(!d){return undefined}u.unshift(undefined);c=0;break;default:c=parseInt(o[a],10)}}switch(t){case"get":return u[c];case"delete":if(l&&typeof c==="number"){u.splice(c,1)}else{delete u[c]}return;case"set":u[c]=i;return u[c];case"define":if(!(c in u)){u[c]=i}return u[c];case"inc":if(typeof u[c]==="number"){u[c]++}else if(!u[c]||typeof u[c]!=="object"){u[c]=1}return u[c];case"dec":if(typeof u[c]==="number"){u[c]--}else if(!u[c]||typeof u[c]!=="object"){u[c]=-1}return u[c];case"append":if(!u[c]){u[c]=[i]}else if(Array.isArray(u[c])){u[c].push(i)}return u[c];case"prepend":if(!u[c]){u[c]=[i]}else if(Array.isArray(u[c])){u[c].unshift(i)}return u[c];case"concat":if(!u[c]){u[c]=i}else if(Array.isArray(u[c])&&Array.isArray(i)){u[c]=u[c].concat(i)}return u[c];case"insert":if(!u[c]){u[c]=i}else if(Array.isArray(u[c])&&Array.isArray(i)){u[c]=i.concat(u[c])}return u[c];case"autoPush":if(u[c]===undefined){u[c]=i}else if(Array.isArray(u[c])){u[c].push(i)}else{u[c]=[u[c],i]}return u[c]}};n.get=n.op.bind(undefined,"get");n.delete=n.op.bind(undefined,"delete");n.set=n.op.bind(undefined,"set");n.define=n.op.bind(undefined,"define");n.inc=n.op.bind(undefined,"inc");n.dec=n.op.bind(undefined,"dec");n.append=n.op.bind(undefined,"append");n.prepend=n.op.bind(undefined,"prepend");n.concat=n.op.bind(undefined,"concat");n.insert=n.op.bind(undefined,"insert");n.autoPush=n.op.bind(undefined,"autoPush");n.prototype={get:function(e){return n.get(this,e)},delete:function(e){return n.delete(this,e)},set:function(e,t){return n.set(this,e,t)},define:function(e,t){return n.define(this,e,t)},inc:function(e,t){return n.inc(this,e,t)},dec:function(e,t){return n.dec(this,e,t)},append:function(e,t){return n.append(this,e,t)},prepend:function(e,t){return n.prepend(this,e,t)},concat:function(e,t){return n.concat(this,e,t)},insert:function(e,t){return n.insert(this,e,t)},autoPush:function(e,t){return n.autoPush(this,e,t)}};n.upgrade=function e(t){Object.defineProperties(t,{get:{value:n.op.bind(undefined,"get",t)},delete:{value:n.op.bind(undefined,"delete",t)},set:{value:n.op.bind(undefined,"set",t)},define:{value:n.op.bind(undefined,"define",t)},inc:{value:n.op.bind(undefined,"inc",t)},dec:{value:n.op.bind(undefined,"dec",t)},append:{value:n.op.bind(undefined,"append",t)},prepend:{value:n.op.bind(undefined,"prepend",t)},concat:{value:n.op.bind(undefined,"concat",t)},insert:{value:n.op.bind(undefined,"insert",t)},autoPush:{value:n.op.bind(undefined,"autoPush",t)}})}},{}]},{},[1])(1)});